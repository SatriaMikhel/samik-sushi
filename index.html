<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Samik Sushi - Order</title>
<meta name="theme-color" content="#A81B1B">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç£</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Serif+JP:wght@700;900&display=swap" rel="stylesheet">
<script src="https://unpkg.com/@phosphor-icons/web"></script>
<style>
    :root { --p: #A81B1B; --bg: #F9F7F4; --w: #fff; --t: #2C2C2C; --g: #6E6E73; --i: #2C3E50; }
    * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; font-family:'Inter',sans-serif; }
    body { background:var(--bg); color:var(--t); padding-bottom:100px; background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0c16.569 0 30 13.431 30 30 0 16.569-13.431 30-30 30C13.431 60 0 46.569 0 30 0 13.431 13.431 0 30 0zm0 5c13.807 0 25 11.193 25 25 0 13.807-11.193 25-25 25C16.193 55 5 43.807 5 30 5 16.193 16.193 5 30 5zm0 5c11.046 0 20 8.954 20 20 0 11.046-8.954 20-20 20-11.046 0-20-8.954-20-20 0-11.046 8.954-20 20-20zm0 5c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15 0-8.284 6.716-15 15-15zm0 5c5.523 0 10 4.477 10 10 0 5.523-4.477 10-10 10-5.523 0-10-4.477-10-10 0-5.523 4.477-10 10-10z' fill='%23d4cdc3' fill-opacity='0.15' fill-rule='evenodd'/%3E%3C/svg%3E"); }
    h1, h2, .serif { font-family:'Noto Serif JP',serif; }
    
    /* COMPONENTS */
    #splash { position:fixed; top:0; left:0; width:100%; height:100%; background:var(--p); z-index:999; display:flex; flex-direction:column; justify-content:center; align-items:center; color:var(--w); transition:0.5s; }
    .hide { transform:translateY(-100%); }
    .modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:200; display:none; justify-content:center; align-items:center; backdrop-filter:blur(4px); opacity:0; transition:0.3s; }
    .modal.show { display:flex; opacity:1; }
    .popup { background:var(--w); width:90%; max-width:400px; border-radius:16px; overflow:hidden; animation:pop 0.3s; position:relative; }
    @keyframes pop { from{transform:scale(0.9)} to{transform:scale(1)} }
    .close-btn { position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.5); color:var(--w); width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:10; }
    
    /* LAYOUT */
    header { background:var(--w); padding:15px 20px; position:sticky; top:0; z-index:90; display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid var(--p); box-shadow:0 2px 10px rgba(0,0,0,0.05); }
    .hero { height:140px; margin:20px; border-radius:16px; background:linear-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.6)),url('https://images.unsplash.com/photo-1580822184713-fc5400e7fe10?q=80&w=600'); background-size:cover; background-position:center; color:var(--w); display:flex; flex-direction:column; justify-content:flex-end; padding:20px; }
    .sticky { position:sticky; top:65px; z-index:89; background:var(--bg); padding-bottom:10px; }
    .search { margin:0 20px 10px; background:var(--w); padding:10px 15px; border-radius:10px; border:1px solid #ddd; display:flex; gap:10px; }
    .search input { border:none; outline:none; width:100%; background:transparent; }
    .cats { padding:0 20px; display:flex; gap:8px; overflow-x:auto; scrollbar-width:none; }
    .pill { padding:8px 16px; background:var(--w); border:1px solid #ddd; border-radius:50px; font-size:0.85rem; color:var(--g); white-space:nowrap; transition:0.2s; }
    .pill.active { background:var(--i); color:var(--w); border-color:var(--i); }
    
    /* MENU GRID */
    .grid { padding:0 20px; display:grid; gap:15px; }
    .card { background:var(--w); padding:10px; border-radius:12px; display:flex; gap:12px; border:1px solid #eee; box-shadow:2px 2px 0 #e0e0e0; position:relative; }
    .card.sold { opacity:0.6; pointer-events:none; grayscale:1; }
    .card img { width:90px; height:90px; border-radius:8px; object-fit:cover; background:#eee; }
    .badge { position:absolute; top:-5px; left:-5px; background:#FFD700; color:var(--p); font-size:0.6rem; padding:3px 8px; border-radius:4px; font-weight:800; transform:rotate(-5deg); border:1px solid #fff; z-index:5; }
    .add { width:32px; height:32px; border-radius:8px; border:2px solid var(--p); color:var(--p); display:flex; align-items:center; justify-content:center; font-size:1.2rem; margin-left:auto; }
    
    /* BOTTOM & SHEET */
    .btm { position:fixed; bottom:0; width:100%; background:var(--w); padding:15px 20px 25px; border-radius:20px 20px 0 0; box-shadow:0 -5px 20px rgba(0,0,0,0.05); display:flex; gap:10px; z-index:95; }
    .btn-main { flex:1; background:var(--p); color:var(--w); border-radius:12px; display:flex; justify-content:space-between; align-items:center; padding:0 20px; font-weight:700; box-shadow:0 4px 10px rgba(168,27,27,0.3); }
    .btn-main.off { background:#ccc; box-shadow:none; pointer-events:none; }
    .sheet { position:fixed; bottom:0; left:0; width:100%; background:var(--bg); border-radius:24px 24px 0 0; padding:25px; transform:translateY(100%); transition:0.3s; z-index:101; max-height:85vh; display:flex; flex-direction:column; }
    .sheet.up { transform:translateY(0); }
    
    /* TOAST */
    .toast { position:fixed; top:20px; left:50%; transform:translate(-50%,-100px); background:var(--i); color:var(--w); padding:10px 20px; border-radius:50px; z-index:200; transition:0.3s; font-size:0.9rem; display:flex; gap:8px; align-items:center; }
    .toast.in { transform:translate(-50%,0); }
    .pay-opt { border:1px solid #ddd; padding:15px; border-radius:10px; display:flex; align-items:center; gap:15px; margin-bottom:10px; }
    .pay-opt.sel { border-color:var(--p); background:#FFF5F5; }
</style>
</head>
<body>

<div id="splash">
    <h1 style="font-size:2rem; letter-spacing:2px;">SAMIK SUSHI</h1>
    <p style="letter-spacing:4px; opacity:0.8;">AUTHENTIC JAPANESE</p>
</div>

<div class="toast" id="msg"><i class="ph-fill ph-check-circle"></i> <span>Masuk keranjang</span></div>

<div class="modal" id="modDetail" onclick="if(event.target==this)closeMod()">
    <div class="popup">
        <div class="close-btn" onclick="closeMod()"><i class="ph-bold ph-x"></i></div>
        <img src="" id="dImg" style="width:100%; height:250px; object-fit:cover;">
        <div style="padding:20px;">
            <h2 id="dName">Menu</h2>
            <div id="dPrice" style="color:var(--p); font-weight:700; font-size:1.1rem; margin:5px 0;">Rp 0</div>
            <p id="dDesc" style="color:var(--g); font-size:0.9rem; line-height:1.5; margin-bottom:20px;">Desc</p>
            <div id="dBtn" style="background:var(--p); color:var(--w); padding:12px; text-align:center; border-radius:10px; font-weight:700;">Tambah</div>
        </div>
    </div>
</div>

<div class="modal" id="modPay">
    <div class="popup" style="padding:25px;">
        <div class="close-btn" onclick="this.closest('.modal').classList.remove('show')"><i class="ph-bold ph-x"></i></div>
        <h2 style="margin-bottom:20px;">Pilih Pembayaran</h2>
        <div class="pay-opt" onclick="selPay('qris',this)">
            <i class="ph-fill ph-qr-code" style="font-size:1.5rem;"></i>
            <div><div style="font-weight:600;">QRIS</div><small style="color:var(--g);">GoPay, OVO, Dana</small></div>
        </div>
        <div class="pay-opt" onclick="selPay('cash',this)">
            <i class="ph-fill ph-coins" style="font-size:1.5rem;"></i>
            <div><div style="font-weight:600;">Kasir</div><small style="color:var(--g);">Bayar Tunai</small></div>
        </div>
        <button id="payBtn" onclick="process()" style="width:100%; padding:15px; background:#ccc; color:#fff; border:none; border-radius:10px; font-weight:700; margin-top:10px;" disabled>Bayar</button>
    </div>
</div>

<header>
    <div><h1 style="color:var(--p); font-size:1.2rem;">SAMIK SUSHI <span style="font-weight:400; opacity:0.7; font-size:0.9rem;">„Çµ„Éü„ÉÉ„ÇØ</span></h1></div>
    <div id="tableInd" style="border:1px solid var(--i); color:var(--i); padding:4px 10px; border-radius:6px; font-size:0.75rem; font-weight:700;"><i class="ph-bold ph-qr-code"></i> Scan QR</div>
</header>

<div class="hero">
    <h2 style="font-size:1.5rem; text-shadow:0 2px 5px rgba(0,0,0,0.5);">Salmon Festival</h2>
    <p>Diskon 20% Menu Salmon!</p>
</div>

<div class="sticky">
    <div class="search"><i class="ph-bold ph-magnifying-glass"></i><input type="text" id="search" placeholder="Cari menu..." oninput="render()"></div>
    <div class="cats">
        <div class="pill active" onclick="filt('all',this)">Semua</div>
        <div class="pill" onclick="filt('sushi',this)">Sushi</div>
        <div class="pill" onclick="filt('ramen',this)">Ramen</div>
        <div class="pill" onclick="filt('drink',this)">Minuman</div>
    </div>
</div>

<div class="grid" id="list"></div>

<div class="btm">
    <div style="width:50px; background:var(--bg); border-radius:12px; display:flex; align-items:center; justify-content:center; border:2px solid var(--i); color:var(--i);" onclick="alert('Pelayan dipanggil!')"><i class="ph-fill ph-hand-waving" style="font-size:1.5rem;"></i></div>
    <div class="btn-main off" id="cartBtn" onclick="togCart(1)">
        <span><i class="ph-fill ph-basket"></i> <span id="ctr">0</span></span>
        <span id="tot">Rp 0</span>
    </div>
</div>

<div style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:100; display:none;" id="overlay" onclick="togCart(0)"></div>
<div class="sheet" id="sheet">
    <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
        <h2 style="font-size:1.2rem;">Pesanan</h2>
        <i class="ph-bold ph-x" style="font-size:1.5rem;" onclick="togCart(0)"></i>
    </div>
    <div id="cList" style="overflow-y:auto; flex:1; margin-bottom:15px;"></div>
    <textarea id="note" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px; margin-bottom:10px;" placeholder="Catatan..."></textarea>
    <div style="border-top:1px dashed #ccc; padding-top:10px; margin-bottom:15px;">
        <div style="display:flex; justify-content:space-between; font-weight:700; color:var(--p); font-size:1.1rem;"><span>Total</span> <span id="finTot">Rp 0</span></div>
    </div>
    <button onclick="togCart(0); document.getElementById('modPay').classList.add('show')" style="width:100%; background:var(--p); color:var(--w); border:none; padding:15px; border-radius:12px; font-weight:700; font-size:1rem;">Lanjut Bayar</button>
</div>
<script>
// DATA MENU - GAMBAR SUDAH DIGANTI SEMUA BIAR TIDAK PECAH
const db = [
    { id:1, name:"Salmon Mentai", cat:"sushi", price:45000, desc:"Salmon bakar saus mentai.", img:"https://images.unsplash.com/photo-1635527023946-9b7338548716?q=80&w=400", sold:true, best:true },
    { id:2, name:"Maguro Nigiri", cat:"sushi", price:30000, desc:"Tuna segar (2 pcs).", img:"https://images.unsplash.com/photo-1553621042-f6e147245754?q=80&w=400", sold:false },
    { id:3, name:"Volcano Roll", cat:"sushi", price:55000, desc:"Roll pedas krispi.", img:"https://images.unsplash.com/photo-1579584425555-c3ce17fd436d?q=80&w=400", sold:false }, // Link Baru
    { id:4, name:"Miso Ramen", cat:"ramen", price:42000, desc:"Kuah miso ayam kental.", img:"https://images.unsplash.com/photo-1569718212165-3a8278d5f624?q=80&w=400", sold:false, best:true },
    { id:5, name:"Chicken Gyoza", cat:"ramen", price:28000, desc:"5 pcs pangsit ayam.", img:"https://images.unsplash.com/photo-1604152135912-04a022e23696?q=80&w=400", sold:false }, // Link Baru
    { id:6, name:"Cold Ocha", cat:"drink", price:12000, desc:"Teh hijau (Refill).", img:"https://images.unsplash.com/photo-1625772452859-1c03d5bf1137?q=80&w=400", sold:false }
];

let cart = {}, cat = 'all', table = null, payMet = null;

window.onload = () => {
    const p = new URLSearchParams(location.search).get('meja');
    if(p) { table=p; document.getElementById('tableInd').innerHTML=`MEJA ${p}`; document.getElementById('tableInd').style.cssText="background:#E8F5E9; color:#2E7D32; border-color:#2E7D32"; }
    const saved = localStorage.getItem('cart'); if(saved) { cart=JSON.parse(saved); upd(); }
    render(); setTimeout(()=>document.getElementById('splash').classList.add('hide'),1500);
};

function render() {
    const q = document.getElementById('search').value.toLowerCase();
    const el = document.getElementById('list'); el.innerHTML='';
    const data = db.filter(i => (cat=='all'||i.cat==cat) && i.name.toLowerCase().includes(q));
    
    if(!data.length) { el.innerHTML='<div style="text-align:center; padding:20px; color:#999">Tidak ditemukan</div>'; return; }
    
    data.forEach(i => {
        const badge = i.best ? `<div class="badge">BEST</div>` : '';
        const btn = i.sold ? `<span style="font-size:0.7rem; border:1px solid #999; color:#999; padding:4px 8px; border-radius:6px;">HABIS</span>` 
                           : `<div class="add"><i class="ph-bold ph-plus"></i></div>`;
        el.innerHTML += `
        <div class="card ${i.sold?'sold':''}" onclick="det(${i.id})">
            ${badge}<img src="${i.img}">
            <div style="flex:1; display:flex; flex-direction:column; justify-content:space-between;">
                <div><div style="font-weight:700;">${i.name}</div><small style="color:var(--g);">${i.desc}</small></div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-top:5px;">
                    <div style="color:var(--p); font-weight:700;">Rp ${i.price.toLocaleString()}</div>${btn}
                </div>
            </div>
        </div>`;
    });
}

function det(id) {
    const i = db.find(p=>p.id==id); if(!i) return;
    document.getElementById('dImg').src=i.img.replace('w=400','w=600');
    document.getElementById('dName').innerText=i.name;
    document.getElementById('dPrice').innerText='Rp '+i.price.toLocaleString();
    document.getElementById('dDesc').innerText=i.desc;
    const btn = document.getElementById('dBtn');
    if(i.sold) { btn.innerText="HABIS"; btn.style.background="#ccc"; btn.onclick=null; }
    else { btn.innerText="Tambah Pesanan"; btn.style.background="var(--p)"; btn.onclick=()=>{ add(i.id); closeMod(); }; }
    document.getElementById('modDetail').classList.add('show');
}

function add(id) {
    cart[id] = (cart[id]||0)+1; upd();
    const t=document.getElementById('msg'); t.classList.add('in'); setTimeout(()=>t.classList.remove('in'),1500);
}

function upd() {
    let q=0, tot=0; const l=document.getElementById('cList'); l.innerHTML='';
    for(let id in cart) {
        const i=db.find(p=>p.id==id), n=cart[id]; q+=n; tot+=i.price*n;
        l.innerHTML+=`<div style="display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px dashed #eee; padding-bottom:5px;"><div><b>${i.name}</b><br><small>${n} x ${i.price.toLocaleString()}</small></div><b>${(i.price*n).toLocaleString()}</b></div>`;
    }
    document.getElementById('ctr').innerText=q; document.getElementById('tot').innerText='Rp '+tot.toLocaleString();
    document.getElementById('finTot').innerText='Rp '+(tot*1.1).toLocaleString(); // Tax 10%
    const btn=document.getElementById('cartBtn');
    if(q>0) { btn.classList.remove('off'); btn.style.background="var(--p)"; } else { btn.classList.add('off'); btn.style.background="#ccc"; }
    localStorage.setItem('cart',JSON.stringify(cart));
}

function closeMod() { document.querySelectorAll('.modal').forEach(m=>m.classList.remove('show')); }
function filt(c,e) { cat=c; document.querySelectorAll('.pill').forEach(p=>p.classList.remove('active')); e.classList.add('active'); render(); }
function togCart(s) { const o=document.getElementById('overlay'), h=document.getElementById('sheet'); if(s){o.style.display='block';setTimeout(()=>h.classList.add('up'),10)}else{h.classList.remove('up');setTimeout(()=>o.style.display='none',300)} }
function selPay(m,e) { payMet=m; document.querySelectorAll('.pay-opt').forEach(o=>o.classList.remove('sel')); e.classList.add('sel'); document.getElementById('payBtn').disabled=false; document.getElementById('payBtn').style.background="var(--p)"; }

function process() {
    if(!table) return alert("Scan QR dulu!");
    const id = "SMK-"+Math.floor(Math.random()*9000+1000);
    const msg = payMet=='qris' ? `PEMBAYARAN BERHASIL!\nOrder ID: ${id}\nMohon tunggu pesanan Anda.` : `SILAKAN KE KASIR\nTunjukkan Kode: ${id}\nBayar untuk memproses pesanan.`;
    alert(msg);
    cart={}; upd(); localStorage.removeItem('cart'); closeMod(); togCart(0);
}
</script>
</body>
</html>
